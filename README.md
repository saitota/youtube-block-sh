# About

This script allows parents to block their children's Youtube channels using [supervised account](https://support.google.com/youtubekids/answer/13887963?hl=ja) .
I created this script because I'm tired to manually blocking multiple Youtube channels for several kids accounts.

# setup

1) You need to grab the authorization token and cookie value from Chrome Devtools.
Save these values as environment variables:

```bash
export YOUTUBE_AUTH="SAPISIDHASH ..."
export YOUTUBE_COOKIE="YSC=...; VISITOR_INFO1_LIVE=...; ..."
```

You can get these values from Chrome DevTools:
- Open Chrome DevTools (F12)
- Go to Network tab
- Block any channel in YouTube Kids
- Find the request to `www.youtube.com/youtubei/v1/kids/update_blacklist`
- Look for the `authorization` and `cookie` headers in the request

Tip: You can also paste `Copy as cURL` from Chrome DevTools to curl.txt and use the following steps:

```bash
# 1. Save the Chrome DevTools 'Copy as cURL' output to curl.txt
# 2. Generate environment variables using gen_export.sh
./gen_export.sh
# Output example:
# export YOUTUBE_AUTH="SAPISIDHASH ..."
# export YOUTUBE_COOKIE="YSC=...; VISITOR_INFO1_LIVE=...; ..."

# 3. Set the environment variables
source <(./gen_export.sh)
```

2) you need to find the `kidGaiaId` within the payload of the block response at `www.youtube.com/youtubei/v1/kids/update_blacklist` .
Take that ID(s) and replace the value to `kids_ids.txt` .

# execution


```bash
# Single channel block
go run cmd/main.go -kid-id YOUR_KID_ID -channel-name CHANNEL_NAME

# Example:
go run cmd/main.go -kid-id 112067128557644567707 -channel-name nekoneko_mania567

# Output:
channelName nekoneko_mania567
channelId UCa9qkNdb6VBr4SislthTMQw
{"responseContext":{"visitorData":"Cgs0aUVWNmVnOWYyYyjimsu-BjIKCgJKUBIEGgAgaQ%3D%3D","serviceTrackingParams":[{"service":"CSI","params":[{"key":"c","value":"WEB"},{"key":"cver","value":"2.20241101.01.00"},{"key":"yt_li","value":"1"},{"key":"UpdateBlockList_rid","value":"0x1a17bb58a9c93a47"}]},{"service":"GFEEDBACK","params":[{"key":"logged_in","value":"1"},{"key":"e","value":"23804281,23986019,24004644,24077241,24166867,24181174,24241378,24290153,24420424,24439361,24453989,24457854,24495712,24566687,24699899,39325854,39326986,51010235,51020570,51025415,51037342,51037353,51043774,51063643,51072748,51091058,51095478,51098299,51115184,51125020,51141472,51152050,51160339,51176511,51178314,51178337,51178340,51178351,51179884,51183910,51184990,51194137,51204329,51217504,51222973,51225393,51227037,51228850,51232637,51237842,51242448,51256084,51260456,51263449,51272458,51274583,51285052,51285717,51300176,51300241,51300582,51303432,51305032,51305496,51308708,51311029,51311036,51313109,51313767,51314158,51320245,51335366,51335646,51338524,51339518,51340662,51341226,51341975,51342857,51347495,51348081,51349914,51350165,51350816,51351446,51353393,51354083,51354114,51354569,51355199,51355417,51355912,51358316,51360108,51360121,51360134,51361830,51362857,51363729,51363738,51363747,51363756,51363763,51363768,51364289,51366423,51366620,51367489,51369233,51369398,51369908,51371521,51372971,51374165,51375205,51375647,51375719,51379054,51380370,51380389,51380392,51382505,51383169,51385023,51385277,51386141,51386361,51386541,51388017,51389629,51389867,51391117,51391339,51391566,51393068,51394772,51394783,51395904,51397091,51397104,51398392,51399057,51400015,51403082,51404299,51404808,51404810,51405824,51405959,51406270,51406710,51407443,51407834,51407888,51408106,51408108,51410901,51411582,51411872,51412101,51412556,51412630,51412778,51412828,51413046,51413055,51413058,51413065,51413072,51413083,51413090,51413541,51413781,51414106,51414152,51414607,51414983,51417456,51417467,51417480,51417495,51417510,51417519,51417659,51419816,51419900,51420898,51420967,51421781,51421831,51422774,51423887,51425616,51425701,51426100,51427224,51428018,51429464,51429775,51431825,51432361,51432618,51432626,51433607,51433620,51434877,51435175"}]},{"service":"GUIDED_HELP","params":[{"key":"logged_in","value":"1"}]},{"service":"ECATCHER","params":[{"key":"client.version","value":"2.20241101"},{"key":"client.name","value":"WEB"}]}],"mainAppWebResponseContext":{"datasyncId":"100924282780415087980||","loggedOut":false},"webResponseContextExtensionData":{"hasDecorated":true}}}
done
kidsId 117225441160219911476
{"responseContext":{"visitorData":"CgtHSUItYjFDODJqcyjimsu-BjIKCgJKUBIEGgAgUA%3D%3D","serviceTrackingParams":[{"service":"CSI","params":[{"key":"c","value":"WEB"},{"key":"cver","value":"2.20241101.01.00"},{"key":"yt_li","value":"1"},{"key":"UpdateBlockList_rid","value":"0x62e642ada95c08a3"}]},{"service":"GFEEDBACK","params":[{"key":"logged_in","value":"1"},{"key":"e","value":"23804281,23986019,24004644,24077241,24166867,24181174,24241378,24290153,24420424,24439361,24453989,24457854,24495712,24566687,24699899,39325854,39326986,51010235,51020570,51025415,51037342,51037353,51043774,51063643,51072748,51091058,51095478,51098299,51115184,51125020,51141472,51152050,51160339,51176511,51178314,51178337,51178340,51178351,51179884,51183910,51184990,51194137,51204329,51217504,51222973,51225393,51227037,51228850,51232637,51237842,51242448,51256084,51260456,51263449,51272458,51274583,51285052,51285717,51300176,51300241,51300582,51303432,51305032,51305496,51308708,51311029,51311036,51313109,51313767,51314158,51320245,51335366,51335646,51338524,51339518,51340662,51341226,51341975,51342857,51347495,51348081,51349914,51350165,51350816,51351446,51353393,51354083,51354114,51354569,51355199,51355417,51355912,51358316,51360108,51360121,51360134,51361830,51362857,51363729,51363738,51363747,51363756,51363763,51363768,51364289,51366423,51366620,51367489,51369233,51369398,51369908,51371521,51372971,51374165,51375205,51375647,51375719,51379054,51380370,51380389,51380392,51382505,51383169,51385023,51385277,51386141,51386361,51386541,51388017,51389629,51389867,51391117,51391339,51391566,51393068,51394772,51394783,51395904,51397091,51397104,51398392,51399057,51400015,51403082,51404299,51404808,51404810,51405824,51405959,51406270,51406710,51407443,51407834,51407888,51408106,51408108,51410901,51411582,51411872,51412101,51412556,51412630,51412778,51412828,51413046,51413055,51413058,51413065,51413072,51413083,51413090,51413541,51413781,51414106,51414152,51414607,51414983,51417456,51417467,51417480,51417495,51417510,51417519,51417659,51419816,51419900,51420898,51420967,51421781,51421831,51422774,51423887,51425616,51425701,51426100,51427224,51428018,51429464,51429775,51431825,51432361,51432618,51432626,51433607,51433620,51434877,51435175"}]},{"service":"GUIDED_HELP","params":[{"key":"logged_in","value":"1"}]},{"service":"ECATCHER","params":[{"key":"client.version","value":"2.20241101"},{"key":"client.name","value":"WEB"}]}],"mainAppWebResponseContext":{"datasyncId":"100924282780415087980||","loggedOut":false},"webResponseContextExtensionData":{"hasDecorated":true}}}
done

```

If you're using an expired cookie, you'll get a `"status": "UNAUTHENTICATED"` error.
If that happens, just refresh your cookie at `conf_secret.txt` and try again.
A successful response will return a long JSON object.
